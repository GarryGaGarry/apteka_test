# apteka_test
Для работы потребуется:
1. python 3.6+
2. allure
3. docker
4. selenoid или webdriver
---
1. python можно скачать здесь https://www.python.org/downloads/
После в консоли открываем папку с проектом и устанавливаем зависимости с помощью команды
```
pip install -r requirements.txt
```
2. инструкцию по установке allure можно найти здесь https://docs.qameta.io/allure/#_installing_a_commandline
3. Docker можно скачать тут https://www.docker.com/get-started и запусти его
4. selenoid можно скачать здесь https://github.com/aerokube/cm/releases/tag/1.8.1
После воспользуйся этой командой для запуска selenoid, исполняемый файл может отличаться в зависимости от твоей OC
```
cm_windows_amd64.exe selenoid start --vnc
```
---
Чтоб запустить тесты перейди в папку с проектом и введи команду
```
pytest
```
ты можешь добавить следующие аргументы к команде выше:
```
--url x                   <= где x url где развернут тестируемый обьект
--headless True/False     <= запустить браузер в режими headless
--browser-type x          <= где x либо web либо mobile, это опция вклчючения мобильной эмуляции
--mobile-device x         <= где x это название мобильного устройства. Данная опция работает
                             только с --browser-type mobile
                             перечень возможных устройств можно посмотреть в файле configuration.py
--browser-size x,y        <= где 'x' это широта, а 'у' это высота окна браузера. Пример: 1280,1024
```
Остальные аргументы можно посмотреть с помощью команды:
```
pytest --help
```
Так же ты можешь изменить значения параметров по умолчанию через файл configuration.py в корне проекта.
Но помни что аргументы командной строки имеют приоритет над файлом конфигурации.

Чтоб сгенерировать allure отчет воспользуйся:
```
allure serve tmp

```
---
Чтоб запустить тесты через докер:
1. Перейди в папку с проектом и собери образ командой ниже, вместо 'name:tag' подставь имя и тег будущего образа
```
docker image build -t name:tag
```
2. Запусти тесты командой
```
docker run name:tag
```
Докер тестировался только с selenoid.
Для корректной работы требуется заменить параметр remote_driver_url в configuration.py
с localhost на свой ip (все кроме localhost оставить так же). Свой ip можно посмотреть используя команду:
```
ipconfig
```

---
